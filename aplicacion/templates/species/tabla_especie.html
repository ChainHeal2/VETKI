{%extends 'base.html'%}
{%block title%}Especies{%endblock%}
{%block main%}
<h1>Lista de especies Registradas</h1>
<div class="table-responsive">
    <table class="table table-striped table-hover table-borderless table-primary align-middle">
        <thead class="table-light">
            <tr>
                <th>Especie</th>
                <th>Opciones</th>
            </tr>
        </thead>
        <tbody class="table-group-divider">
            {% for dato in tabla %}
            <tr>
                <td scope="row">{{ dato['name_species'] }}</td>
                <td>
                    <button type="button" class="btn btn-primary" onclick="mostrarModal('modal{{ dato.species_id }}')">
                        Modificar
                    </button>

                    <a class="btn btn-danger" href="{{ url_for('species.delete_specie', species_id=dato['species_id']) }}" role="button">
                        Eliminar
                    </a>

                    <div id="modal{{ dato.species_id }}" style="display:none; position:fixed; top:50%; left:50%; transform:translate(-50%, -50%); background:white; border:2px solid #000; padding:20px; z-index:1000; box-shadow: 0px 0px 15px rgba(0,0,0,0.5);">
                        <h4>Editar Especie</h4>
                        <form action="{{url_for('species.update_specie',species_id=dato.species_id)}}" method="POST">
                            <div class="mb-3">
                                <input type="text" class="form-control" name="species_user" value="{{ dato['name_species'] }}">
                            </div>
                            <button type="submit" class="btn btn-success">Guardar Cambios</button>
                            <button type="button" class="btn btn-secondary" onclick="cerrarModal('modal{{ dato.species_id }}')">Cancelar</button>
                        </form>
                    </div>
                </td>
            </tr>        
            {% endfor %}
        </tbody>
    </table>
</div>

<hr>
<h3>Agregar Nueva Especie</h3>
<form action="" method="post">
    <label for="new_specie">Nombre de especie</label>
    <input type="text" id="new_specie" name="species_user" class="form-control" style="width: auto; display: inline-block;">
    <button type="submit" class="btn btn-primary">Ingresar</button>
</form>
{%endblock%}

{%block footer%}
<script>
    function mostrarModal(id) {
        document.getElementById(id).style.display = 'block';
    }

    function cerrarModal(id) {
        document.getElementById(id).style.display = 'none';
    }
</script>
{%endblock%}